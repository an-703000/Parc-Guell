<!DOCTYPE html>
<html>
<head>
<meta name="robots" content="noindex, nofollow">
<meta charset="utf-8">
<title>Parc Guell</title>
<link rel="stylesheet" href="https://cdn.pannellum.org/2.5/pannellum.css"/>
<script src="https://cdn.pannellum.org/2.5/pannellum.js"></script>
<style>
html, body { margin:0; height:100%; width:100%; overflow:hidden; }
#panorama { width:100%; height:100%; }
#popup { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
background:white; padding:10px; z-index:9999; border-radius:10px; }
#popup img, #popup video { max-width:500px; }
#overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%;
background:rgba(0,0,0,0.7); z-index:9998; }
</style>
</head>
<body>

<div id="panorama"></div>
<div id="overlay" onclick="closePopup()"></div>
<div id="popup"><div id="mediaContainer"></div><br>
<button onclick="closePopup()">Chiudi</button></div>

<script>
function openMedia(file,type="img"){
    let container=document.getElementById("mediaContainer");
    if(type==="video"){
        container.innerHTML='<video controls autoplay width="500"><source src="'+file+'" type="video/mp4"></video>';
    }else{
        container.innerHTML='<img src="'+file+'" width="500">';
    }
    document.getElementById("popup").style.display="block";
    document.getElementById("overlay").style.display="block";
}
function closePopup(){
    document.getElementById("popup").style.display="none";
    document.getElementById("overlay").style.display="none";
}

var scenes={
"scene1":{"type":"equirectangular","panorama":"Parc Guell 1.jpg","hotSpots":[
{"pitch":0,"yaw":0,"type":"scene","text":"Sali","sceneId":"scene2"}
]},
"scene2":{"type":"equirectangular","panorama":"Parc Guell 2.jpg","hotSpots":[
{"pitch":-20,"yaw":-180,"type":"scene","text":"Scendi","sceneId":"scene1"},
{"pitch":0,"yaw":55,"type":"scene","text":"Sala Ipostila","sceneId":"scene3"},
{"pitch":-0,"yaw":-50,"type":"scene","text":"Terrazza","sceneId":"scene4"},
{"pitch":-60,"yaw":-180,"type":"info","text":"Dettaglio della Salamandra","clickHandlerFunc":function(){openMedia("El drac.jpg");}}
]},
"scene3":{"type":"equirectangular","panorama":"Parc Guell 3.jpg","hotSpots":[
{"pitch":0,"yaw":170,"type":"scene","text":"Scendi","sceneId":"scene2"},
{"pitch":35,"yaw":160,"type":"info","text":"Dettaglio del mosaico","clickHandlerFunc":function(){openMedia("Mosaico sole.jpg");}}
]},
"scene4":{"type":"equirectangular","panorama":"Parc Guell 4.jpg","hotSpots":[
{"pitch":-5,"yaw":135,"type":"scene","text":"Scendi","sceneId":"scene2"},
{"pitch":-30,"yaw":30,"type":"info","text":"Dettaglio della panchina","clickHandlerFunc":function(){openMedia("Panchina.jpg");}},
{"pitch":0,"yaw":-150,"type":"info","text":"Vista dall'alto","clickHandlerFunc":function(){window.open("https://earth.google.com/earth/d/1j1wbTYDG8tGAcbo5Rz6Ug6Mm8R7XYg3l?usp=sharing","_blank");}}
]}
};

pannellum.viewer('panorama',{
"default":{"firstScene":"scene1","sceneFadeDuration":1000},
"scenes":scenes,
"autoLoad":true,
"showFullscreenCtrl":true,
"showVRCtrl":true
});
</script>

</body>
</html>