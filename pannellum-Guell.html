<!DOCTYPE html>
<html>
<head>
<meta name="robots" content="noindex, nofollow">
<meta charset="utf-8">
<title>Parc Guell</title>
<link rel="stylesheet" href="https://cdn.pannellum.org/2.5/pannellum.css"/>
<script src="https://cdn.pannellum.org/2.5/pannellum.js"></script>

<style>
html, body { 
    margin:0; 
    height:100%; 
    width:100%; 
    overflow:hidden; 
}

#panorama { 
    width:100%; 
    height:100%; 
    position:relative;   /* FONDAMENTALE per full screen Genially */
}

/* DIV FLOTTANTE INTERNO */
#panoramaMedia {
    display:none;
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:white;
    padding:15px;
    border-radius:10px;
    z-index:9999;
    box-shadow:0 0 20px rgba(0,0,0,0.6);
    text-align:center;
}

#panoramaMedia img {
    max-width:600px;
    max-height:70vh;
}

#panoramaMedia button{
    margin-top:10px;
    padding:6px 12px;
    cursor:pointer;
}
</style>
</head>

<body>

<div id="panorama">
    <!-- DIV FLOTTANTE DENTRO IL PANORAMA -->
    <div id="panoramaMedia"></div>
</div>

<script>

/* FUNZIONE APERTURA IMMAGINE */
function toggleImage(file){
    let container=document.getElementById("panoramaMedia");

    if(container.style.display==="block"){
        container.style.display="none";
        container.innerHTML="";
    } else {
        container.innerHTML='<img src="'+file+'"><br><button onclick="closeImage()">Chiudi</button>';
        container.style.display="block";
    }
}

/* FUNZIONE CHIUSURA */
function closeImage(){
    let container=document.getElementById("panoramaMedia");
    container.style.display="none";
    container.innerHTML="";
}

var scenes={
"scene1":{"type":"equirectangular","panorama":"Parc Guell 1.jpg","hotSpots":[
{"pitch":0,"yaw":0,"type":"scene","text":"Sali","sceneId":"scene2"}
]},
"scene2":{"type":"equirectangular","panorama":"Parc Guell 2.jpg","hotSpots":[
{"pitch":-20,"yaw":-180,"type":"scene","text":"Scendi","sceneId":"scene1"},
{"pitch":0,"yaw":55,"type":"scene","text":"Sala Ipostila","sceneId":"scene3"},
{"pitch":0,"yaw":-50,"type":"scene","text":"Terrazza","sceneId":"scene4"},
{"pitch":-60,"yaw":-180,"type":"info","text":"Dettaglio della Salamandra",
 "clickHandlerFunc":function(){toggleImage("El drac.jpg");}}
]},
"scene3":{"type":"equirectangular","panorama":"Parc Guell 3.jpg","hotSpots":[
{"pitch":0,"yaw":170,"type":"scene","text":"Scendi","sceneId":"scene2"},
{"pitch":35,"yaw":160,"type":"info","text":"Dettaglio del mosaico",
 "clickHandlerFunc":function(){toggleImage("Mosaico sole.jpg");}}
]},
"scene4":{"type":"equirectangular","panorama":"Parc Guell 4.jpg","hotSpots":[
{"pitch":-5,"yaw":135,"type":"scene","text":"Scendi","sceneId":"scene2"},
{"pitch":-30,"yaw":30,"type":"info","text":"Dettaglio della panchina",
 "clickHandlerFunc":function(){toggleImage("Panchina.jpg");}},
{"pitch":0,"yaw":-150,"type":"info","text":"Vista dall'alto",
 "clickHandlerFunc":function(){
     window.open("https://earth.google.com/earth/d/1j1wbTYDG8tGAcbo5Rz6Ug6Mm8R7XYg3l?usp=sharing","_blank");
 }}
]}
};

pannellum.viewer('panorama',{
"default":{"firstScene":"scene1","sceneFadeDuration":1000},
"scenes":scenes,
"autoLoad":true,
"showFullscreenCtrl":true,
"showVRCtrl":true
});
</script>

</body>
</html>
